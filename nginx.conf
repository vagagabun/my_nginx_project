# Определяем блок http
http {
    # Можно добавить карту для определения мобильных устройств, если нужно
    map $http_user_agent $is_mobile {
        default         0;
        "~*iphone"      1;
        "~*android"     1;
        "~*blackberry"  1;
        "~*windows phone" 1;
        "~*mobile"      1;
    }

    # Блок server для настройки каждого сайта
    server {
        listen 80;
        server_name localhost;

        # Здесь правильно указываем root внутри блока server
        root /usr/share/nginx/html;  # Это стандартная директория для файлов

        index index.html;

        # Логика для мобильных пользователей
        if ($is_mobile) {
            root /usr/share/nginx/html/mobile;
        }

        # Логика для десктопных пользователей
        if ($is_mobile = 0) {
            root /usr/share/nginx/html/desktop;
        }

        # Попробуем найти нужный файл или отдадим index.html по умолчанию
        location / {
            try_files $uri $uri/ /index.html;
        }

        # Дополнительные настройки, если они нужны
        # location /api/ {
        #     proxy_pass http://api_backend;
        # }
    }
}
