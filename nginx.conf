http {
    # Определяем переменную для мобильных устройств
    map $http_user_agent $is_mobile {
        default         0;
        "~*iphone"      1;
        "~*android"     1;
        "~*blackberry"  1;
        "~*windows phone" 1;
        "~*mobile"      1;
    }

    server {
        listen 80;
        server_name localhost;

        # Здесь указываем root внутри блока server
        root /usr/share/nginx/html;  # Этот путь будет использоваться по умолчанию

        index index.html;

        # Для мобильных пользователей отдаем мобильную версию
        if ($is_mobile) {
            root /usr/share/nginx/html/mobile;
        }

        # Для десктопных пользователей отдаем обычную версию
        if ($is_mobile = 0) {
            root /usr/share/nginx/html/desktop;
        }

        # Попробуем найти нужный файл, если нет, отдаем index.html
        location / {
            try_files $uri $uri/ /index.html;
        }

        # Дополнительные настройки, если нужно
        # location /api/ {
        #     proxy_pass http://api_backend;
        # }
    }
}
